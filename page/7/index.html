
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
  
    <title>我是小韩同学</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="洛绍川">
    

    
    <meta name="description" content="code">
<meta property="og:type" content="website">
<meta property="og:title" content="我是小韩同学">
<meta property="og:url" content="http://www.luoshaochuan.com/page/7/index.html">
<meta property="og:site_name" content="我是小韩同学">
<meta property="og:description" content="code">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="我是小韩同学">
<meta name="twitter:description" content="code">

    
    
    
    <link rel="stylesheet" href="/css/style.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

  <body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="我是小韩同学" title="我是小韩同学"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="我是小韩同学">我是小韩同学</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/tags">标签</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:www.luoshaochuan.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/07/27/leetcode Stranger Printer/" title="leetcode Coin Path" itemprop="url">leetcode Coin Path</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="洛绍川" target="_blank" itemprop="author">洛绍川</a>
		
  <p class="article-time">
    <time datetime="2017-07-27T12:37:13.000Z" itemprop="datePublished"> 发表于 2017-07-27</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>here is a strange printer with the following two special requirements:</p>
<p>The printer can only print a sequence of the same character each time.<br>At each turn, the printer can print new characters starting from and ending at any places, and will cover the original existing characters.<br>Given a string consists of lower English letters only, your job is to count the minimum number of turns the printer needed in order to print it.</p>
<p>Example 1:<br>Input: “aaabbb”<br>Output: 2<br>Explanation: Print “aaa” first and then print “bbb”.<br>Example 2:<br>Input: “aba”<br>Output: 2<br>Explanation: Print “aaa” first and then print “b” from the second place of the string, which will cover the existing character ‘a’.<br>Hint: Length of the given string will not exceed 100.</p>
<h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><p>令dp[i][j]表示打印字符串i…j所需要的次数，显然dp[i][j]最多为dp[i+1][j]+1,但是如果i+1…j之间有和s[i]相同的字母，我们打印s[i]时就可以一起打印了。设s[i]==s[k],i+1&lt;=k&lt;=j,则dp[i][k]可以为dp[i][k-1]，综上：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">dp[i][j]=min&#123;1+dp[i+1][j],dp[i][k-1]+dp[k+1][j]|s[i]==s[k]&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div></pre></td><td class="code"><pre><div class="line">#include&lt;iostream&gt;</div><div class="line">#include&lt;stdio.h&gt;</div><div class="line">#include&lt;cmath&gt;</div><div class="line">#include&lt;algorithm&gt;</div><div class="line">#include&lt;functional&gt;</div><div class="line">#include&lt;string&gt;</div><div class="line">#include&lt;cstring&gt;</div><div class="line">#include&lt;string.h&gt;</div><div class="line">#include&lt;map&gt;</div><div class="line">#include&lt;queue&gt;</div><div class="line">#include&lt;stack&gt;</div><div class="line">#include&lt;list&gt;</div><div class="line">#include&lt;cctype&gt;</div><div class="line">#include&lt;fstream&gt;</div><div class="line">#include&lt;sstream&gt;</div><div class="line">#include&lt;iomanip&gt;</div><div class="line">#include&lt;set&gt;</div><div class="line">#include&lt;bitset&gt;</div><div class="line">#include&lt;vector&gt;</div><div class="line">#include&lt;cstdlib&gt;</div><div class="line">#include&lt;time.h&gt;</div><div class="line"></div><div class="line">using namespace std;</div><div class="line"></div><div class="line">#define mem(x,a) memset(x,a,sizeof(x))</div><div class="line">#define FOR(i, a, b) for (int i=a; i&lt;b; i++)</div><div class="line">#define FOR(i, a) for (int i=0; i&lt;a; i++)</div><div class="line"></div><div class="line">const int inf = 0x3fffffff;</div><div class="line">const double pi = acos(-1.0);</div><div class="line">const double eps = 1e-8;</div><div class="line">typedef long long ll;</div><div class="line"></div><div class="line">const int maxn = 105;</div><div class="line">int dp[maxn][maxn];</div><div class="line"></div><div class="line">int solve(string s)</div><div class="line">&#123;</div><div class="line">	mem(dp, 0);</div><div class="line">	int n = s.length();</div><div class="line">	if (n == 0)return 0;</div><div class="line">	for (int i = 0; i&lt;n; ++i)dp[i][i] = 1;</div><div class="line">	for (int d = 1; d&lt;n; ++d)</div><div class="line">	&#123;</div><div class="line">		for (int i = 0; i + d&lt;n; ++i)</div><div class="line">		&#123;</div><div class="line">			dp[i][i + d] = dp[i + 1][i + d] + 1;</div><div class="line">			for (int k = i + 1; k &lt;= i + d; ++k)</div><div class="line">			&#123;</div><div class="line">				if (s[i] == s[k])dp[i][i + d] = min(dp[i][i + d], dp[i][k - 1] + dp[k + 1][i + d]);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	return dp[0][n - 1];</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Solution &#123;</div><div class="line">public:</div><div class="line">	int strangePrinter(string s) &#123;</div><div class="line">		return solve(s);</div><div class="line">	&#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/算法-leetcode/">算法 leetcode</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/07/25/leetcode Coin Path/" title="leetcode Coin Path" itemprop="url">leetcode Coin Path</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="洛绍川" target="_blank" itemprop="author">洛绍川</a>
		
  <p class="article-time">
    <time datetime="2017-07-25T11:30:00.000Z" itemprop="datePublished"> 发表于 2017-07-25</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>LeetCode 656. Coin Path<br>Given an array A (index starts at 1) consisting of N integers: A1, A2, …, AN and an integer B. The integer B denotes that from any place (suppose the index is i) in the array A, you can jump to any one of the place in the array A indexed i+1, i+2, …, i+B if this place can be jumped to. Also, if you step on the index i, you have to pay Ai coins. If Ai is -1, it means you can’t jump to the place indexed i in the array.</p>
<p>Now, you start from the place indexed 1 in the array A, and your aim is to reach the place indexed N using the minimum coins. You need to return the path of indexes (starting from 1 to N) in the array you should take to get to the place indexed N using minimum coins.</p>
<p>If there are multiple paths with the same cost, return the lexicographically smallest such path.</p>
<p>If it’s not possible to reach the place indexed N then you need to return an empty array.  </p>
<p>Example 1:  </p>
<p>Input: [1,2,4,-1,2], 2<br>Output: [1,3,5]<br>Example 2:  </p>
<p>Input: [1,2,4,-1,2], 1<br>Output: []<br>Note:  </p>
<p>Path Pa1, Pa2, …, Pan is lexicographically smaller than Pb1, Pb2, …, Pbm, if and only if at the first i where Pai and Pbi differ, Pai &lt; Pbi; when no such i exists, then n &lt; m.<br>A1 &gt;= 0. A2, …, AN (if exist) will in the range of [-1, 100].<br>Length of A is in the range of [1, 1000].<br>B is in the range of [1, 100].</p>
<h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><p>令dp[i]表示从i到n的最小代价，则：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">dp[i]=INF if A[i-1]=-1</div><div class="line"></div><div class="line">dp[i]=min(dp[i+k]+A[i+k-1]|1&lt;=k=B,A[i+k-1]!=-1)</div></pre></td></tr></table></figure></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1001</span>;</div><div class="line"><span class="keyword">int</span> dp[maxn];</div><div class="line"></div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; solve(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;A, <span class="keyword">int</span> B)</div><div class="line">&#123;</div><div class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; res;</div><div class="line">	<span class="keyword">int</span> n = A.size();</div><div class="line">	<span class="keyword">if</span> (n == <span class="number">1</span>)</div><div class="line">	&#123;</div><div class="line">		res.push_back(<span class="number">1</span>); <span class="keyword">return</span> res;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (A[n - <span class="number">1</span>] == <span class="number">-1</span>)</div><div class="line">		<span class="keyword">return</span> res;</div><div class="line">	mem(dp, <span class="number">0x3f</span>);</div><div class="line">	dp[n] = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">1</span>; --i)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span> (A[i - <span class="number">1</span>] != <span class="number">-1</span>)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= B; ++j)</div><div class="line">			&#123;</div><div class="line">				<span class="keyword">if</span> (i + j &lt;= n &amp;&amp; A[i + j - <span class="number">1</span>] != <span class="number">-1</span>)</div><div class="line">					dp[i] = min(dp[i], dp[i + j] + A[i + j - <span class="number">1</span>]);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (dp[<span class="number">1</span>] == inf)</div><div class="line">		<span class="keyword">return</span> res;</div><div class="line">	<span class="keyword">int</span> k = <span class="number">1</span>;</div><div class="line">	</div><div class="line">	<span class="keyword">while</span> (k!=n)</div><div class="line">	&#123;</div><div class="line">		res.push_back(k);</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= B; ++j)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">if</span> (dp[k] == dp[k + j] + A[k + j - <span class="number">1</span>])</div><div class="line">			&#123;</div><div class="line">				k = k + j;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	res.push_back(n);</div><div class="line">	<span class="keyword">return</span> res;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/算法-leetcode/">算法 leetcode</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/07/23/Magical Thinking/" title="Magical Thinking" itemprop="url">Magical Thinking</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="洛绍川" target="_blank" itemprop="author">洛绍川</a>
		
  <p class="article-time">
    <time datetime="2017-07-23T10:15:16.000Z" itemprop="datePublished"> 发表于 2017-07-23</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="Magical-Thinking-状态转移DP"><a href="#Magical-Thinking-状态转移DP" class="headerlink" title="Magical Thinking:状态转移DP"></a>Magical Thinking:状态转移DP</h2><p><a href="https://codejam.withgoogle.com/codejam/contest/4344486/dashboard#s=p2&amp;a=2" target="_blank" rel="external">https://codejam.withgoogle.com/codejam/contest/4344486/dashboard#s=p2&amp;a=2</a></p>
<h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>初始情况下，N+1个人的得分均为0。假如N=2,令F[i][j][k]表示前k道题第1个朋友恰好i分，第2个朋友恰好得了j分时我所能得到的最大的分数。<br>则：  </p>
<blockquote>
<p>F[i][j][k] = F[i][j][k-1]   //第k道题三人均答错<br>F[i][j][k] = F[i][j][k-1]+1  //第k道他俩答错我答对<br>F[i][j][k] = F[i-1][j][k-1]  //第k道只有第1位朋友答对<br>F[i][j][k] = F[i][j-1][k-1]  //第k道只有第2位朋友答对<br>F[i][j][k] = F[i-1][j][k-1]+1  //第k道我和第1位朋友答对<br>F[i][j][k] = F[i][j-1][k-1]+1  //第k道我和第2位朋友答对<br>F[i][j][k] = F[i-1][j-1][k-1]  //第k道他俩答对我答错<br>F[i][j][k] = F[i-1][j-1][k-1]+1  //第k道三人均答对<br>综上，F取上面最大值</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0x3f3f3f3f</span>;</div><div class="line"><span class="built_in">string</span> my;</div><div class="line"><span class="built_in">string</span> fr1;</div><div class="line"><span class="built_in">string</span> fr2;</div><div class="line"><span class="keyword">int</span> s1;</div><div class="line"><span class="keyword">int</span> s2;</div><div class="line"><span class="keyword">int</span> F[<span class="number">51</span>][<span class="number">51</span>];</div><div class="line"><span class="keyword">int</span> M[<span class="number">51</span>][<span class="number">51</span>][<span class="number">51</span>];</div><div class="line"><span class="keyword">struct</span> State</div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> s0, s1, s2;</div><div class="line">	State()&#123;&#125;;</div><div class="line">	State(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c)</div><div class="line">	&#123;</div><div class="line">		s0 = a; s1=b; s2=c;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> State &amp;s)<span class="keyword">const</span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span> (s0 != s.s0)</div><div class="line">			<span class="keyword">return</span> s0 &lt; s.s0;</div><div class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (s1 != s.s1)</div><div class="line">			<span class="keyword">return</span> s1 &lt; s.s1;</div><div class="line">		<span class="keyword">else</span></div><div class="line">			<span class="keyword">return</span> s2 &lt; s.s2;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> c, <span class="keyword">int</span> N, <span class="keyword">int</span> Q)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span> (N == <span class="number">1</span>)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> same = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; Q; ++i)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">if</span> (my[i] == fr1[i])</div><div class="line">				++same;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> Q - <span class="built_in">abs</span>(s1 - same);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span></div><div class="line">	&#123;</div><div class="line">		<span class="built_in">memset</span>(M, <span class="number">-1</span>, <span class="keyword">sizeof</span>(M));</div><div class="line">		M[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; Q; ++k)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= k; ++i)</div><div class="line">			&#123;</div><div class="line">				<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= k; ++j)</div><div class="line">				&#123;</div><div class="line">					<span class="keyword">if</span> (M[k][i][j] &gt;= <span class="number">0</span>)</div><div class="line">					&#123;</div><div class="line">						<span class="comment">//正确答案为'T'</span></div><div class="line">						<span class="keyword">int</span> a = (fr1[k] == <span class="string">'T'</span> ? <span class="number">1</span> : <span class="number">0</span>);</div><div class="line">						<span class="keyword">int</span> b = (fr2[k] == <span class="string">'T'</span> ? <span class="number">1</span> : <span class="number">0</span>);</div><div class="line">						<span class="keyword">int</span> c = (my[k] == <span class="string">'T'</span> ? <span class="number">1</span> : <span class="number">0</span>);</div><div class="line">						M[k + <span class="number">1</span>][i + a][j + b] = max(M[k + <span class="number">1</span>][i + a][j + b],M[k][i][j]+c);</div><div class="line">						<span class="comment">//正确答案为'F'</span></div><div class="line">						a = (fr1[k] == <span class="string">'F'</span> ? <span class="number">1</span> : <span class="number">0</span>);</div><div class="line">						b = (fr2[k] == <span class="string">'F'</span> ? <span class="number">1</span> : <span class="number">0</span>);</div><div class="line">						c = (my[k] == <span class="string">'F'</span> ? <span class="number">1</span> : <span class="number">0</span>);</div><div class="line">						M[k + <span class="number">1</span>][i + a][j + b] = max(M[k + <span class="number">1</span>][i + a][j + b], M[k][i][j] + c);</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> M[Q][s1][s2];</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	freopen(<span class="string">"C-large-practice.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"C-large-practice.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="keyword">int</span> T;</div><div class="line">	<span class="built_in">cin</span> &gt;&gt; T;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; T; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> N, Q;</div><div class="line">		<span class="built_in">cin</span> &gt;&gt; N &gt;&gt; Q;</div><div class="line">		<span class="keyword">if</span> (N == <span class="number">1</span>)</div><div class="line">		&#123;</div><div class="line">			<span class="built_in">cin</span> &gt;&gt; fr1;</div><div class="line">			<span class="built_in">cin</span> &gt;&gt; my;</div><div class="line">			<span class="built_in">cin</span> &gt;&gt; s1;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span></div><div class="line">		&#123;</div><div class="line">			<span class="built_in">cin</span> &gt;&gt; fr1;</div><div class="line">			<span class="built_in">cin</span> &gt;&gt; fr2;</div><div class="line">			<span class="built_in">cin</span> &gt;&gt; my;</div><div class="line">			<span class="built_in">cin</span> &gt;&gt; s1 &gt;&gt; s2;</div><div class="line">		&#125;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"Case #%d: %d\n"</span>,i+<span class="number">1</span>,solve(i + <span class="number">1</span>, N, Q));</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/Kickstart-Google/">Kickstart Google</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/07/21/GoSightseeing/" title="GoSightseeing" itemprop="url">GoSightseeing</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="洛绍川" target="_blank" itemprop="author">洛绍川</a>
		
  <p class="article-time">
    <time datetime="2017-07-21T04:32:11.000Z" itemprop="datePublished"> 发表于 2017-07-21</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="GoSightseeing"><a href="#GoSightseeing" class="headerlink" title="GoSightseeing"></a>GoSightseeing</h2><p><a href="https://codejam.withgoogle.com/codejam/contest/8284487/dashboard#s=a&amp;a=0" target="_blank" rel="external">题目</a><a href="https://codejam.withgoogle.com/codejam/contest/8284487/dashboard#s=a&amp;a=0" target="_blank" rel="external">https://codejam.withgoogle.com/codejam/contest/8284487/dashboard#s=a&amp;a=0</a>  </p>
<h3 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h3><blockquote>
<p>从城市1出发依次经过2,3,4…到达城市N,每个城市你可以决定是否参观还是直接等车，参观将花掉Ts时间。不参观的话你可以立即等车，每座城市i都有发往第i+1座城市的班车。起始发车时间为Si,每隔Fi时间发一班车，到达下一座城市将花掉Di时间。问你能否在Tf前到达城市N,如果能，你最多能参观多少座城市？</p>
<h3 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h3><p>The input starts with one line containing one integer T, which is the number of test cases. T test cases follow.<br>Each test case begins with a line containing 3 integers, N, Ts and Tf, representing the number of cities, the time taken for sightseeing in any city, and the latest time you can arrive in city N.<br>This is followed by N - 1 lines. On the i-th line, there are 3 integers, Si, Fi and Di, indicating the start time, frequency, and duration of buses travelling from city i to city i + 1.</p>
<h3 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h3><p>For each test case, output one line containing Case #x: y, where x is the test case number (starting from 1) and y is the maximum number of cities you can go sightseeing in such that you can still arrive at city N by time Tf at the latest. If it is impossible to arrive at city N by time Tf, output Case #x: IMPOSSIBLE.</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>Input<br>4<br>4 3 12<br>3 2 1<br>6 2 2<br>1 3 2<br>3 2 30<br>1 2 27<br>3 2 1<br>4 1 11<br>2 1 2<br>4 1 5<br>8 2 2<br>5 10 5000<br>14 27 31<br>27 11 44<br>30 8 20<br>2000 4000 3  </p>
</blockquote>
<p>Output<br>Case #1: 2<br>Case #2: 0<br>Case #3: IMPOSSIBLE<br>Case #4: 4</p>
<h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>(1)假设在每座城市Tw时刻开始等车，则等到车的时间为满足Si+xFi&gt;Tw的最小的数。即登车的时间为Tb=Si+ceil((Tw-Si)/Fi)*Fi,到达下一座城市的时间为Te=Tb+Di.你可以立即等车，则等车时刻即为到达时刻，也可以花Ts参观，等车时刻为Te+Ts.我们可以写一个函数计算这一过程。  </p>
<p>(2)首次，如果每到一个城市就立即开始等车，最后到达城市N时，如果能满足Tf要求，则可行，否则为IMPOSSIBLE.  </p>
<p>(3)如果另F[i][j]表示在时间j内前i个城市最多能参观的城市，这就有点类似背包问题，但是由于T的范围较大，复杂度较高。  </p>
<p>(4)在处理背包问题时，如果背包重量范围过大，我们可以采用F[i][j]表示取得价值为j时前i个物品的最小重量。同理，这里我们可以用F[i][j]表示到达第i个城市中参观j个城市所花的最少时间。则:<br>F[i][j]=F[i-1][j-1]+arrive(i-1,F[i-1][j-1]+Ts);//参观第i-1个城市<br>F[i][j]=F[i-1][j]+arrive(i-1,F[i-1][j])//不参观第i-1个城市<br>综上：<br>F[i][j]=min{F[i-1][j-1]+arrive(i-1,F[i-1][j-1]+Ts),F[i][j]=F[i-1][j]+arrive(i-1,F[i-1][j])}<br>初始化:<br>F[1][0]=0,F[1][1…N]=INF;</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> NUM 2000</span></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0x3f3f3f3f</span>;</div><div class="line"><span class="keyword">int</span> N, Ts, Tf;</div><div class="line"><span class="keyword">int</span> S[NUM + <span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> F[NUM + <span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> D[NUM + <span class="number">1</span>];</div><div class="line"></div><div class="line"><span class="comment">/*在第i座城市t时刻开始等车，到达下一座城市的时间*/</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">arrive</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> t)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> x = max(<span class="number">0</span>,<span class="keyword">int</span>(<span class="built_in">ceil</span>(<span class="keyword">float</span>(t-S[i])/F[i])));</div><div class="line">	<span class="keyword">return</span> S[i] + x*F[i] + D[i];</div><div class="line">&#125;</div><div class="line"><span class="comment">/*</span></div><div class="line">在处理背包问题时，如果背包重量范围过大，我们可以采用F[i][j]表示取得价值为j时前i个物品的最小重量。同理，这里我们可以用F[i][j]表示到达第i个城市中参观j个城市所花的最少时间。则:</div><div class="line">F[i][j] = F[i - 1][j - 1] + arrive(i - 1, F[i - 1][j - 1] + Ts);//参观第i-1个城市  </div><div class="line">F[i][j] = F[i - 1][j] + arrive(i - 1, F[i - 1][j])//不参观第i-1个城市</div><div class="line">综上：</div><div class="line">F[i][j] = min&#123; arrive(i - 1, F[i - 1][j - 1] + Ts), arrive(i - 1, F[i - 1][j]) &#125;</div><div class="line">初始化:</div><div class="line">F[1][0] = 0, F[1][1...N] = INF;</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> c)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> **F = (<span class="keyword">int</span>**)<span class="built_in">malloc</span>((N+<span class="number">1</span>)*<span class="keyword">sizeof</span>(<span class="keyword">int</span>*));</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N + <span class="number">1</span>; ++i)</div><div class="line">	&#123;</div><div class="line">		F[i] = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>((N + <span class="number">1</span>)*<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; N + <span class="number">1</span>; ++j)</div><div class="line">			F[i][j] = INF;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//先看看不参观立即等车需要花多少时间</span></div><div class="line">	F[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">0</span>;</div><div class="line">	<span class="keyword">int</span> Te=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; N + <span class="number">1</span>; ++i)</div><div class="line">	&#123;</div><div class="line">		Te = arrive(i - <span class="number">1</span>, Te);</div><div class="line">		F[i][<span class="number">0</span>] = Te;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (F[N][<span class="number">0</span>] &gt; Tf)</div><div class="line">	&#123;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"Case #%d: IMPOSSIBLE\n"</span>,c);</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">//可行的话开始动态规划</span></div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; N + <span class="number">1</span>; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; i; ++j)</div><div class="line">		&#123;</div><div class="line">			F[i][j] = min(arrive(i - <span class="number">1</span>, F[i - <span class="number">1</span>][j - <span class="number">1</span>] + Ts), arrive(i - <span class="number">1</span>, F[i - <span class="number">1</span>][j]));</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> n;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span> (F[N][i] &lt;= Tf)</div><div class="line">			n = i;</div><div class="line">		<span class="keyword">else</span></div><div class="line">			<span class="keyword">break</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"Case #%d: %d\n"</span>, c,n);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	freopen(<span class="string">"GoSightseeing.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"GoSightseeing.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="keyword">int</span> T;</div><div class="line">	<span class="built_in">cin</span> &gt;&gt; T;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; T; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="built_in">cin</span> &gt;&gt; N &gt;&gt; Ts &gt;&gt; Tf;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; N; ++j)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">int</span> s, f, d;</div><div class="line">			<span class="built_in">cin</span> &gt;&gt; s &gt;&gt; f &gt;&gt; d;</div><div class="line">			S[j] = s;</div><div class="line">			F[j] = f;</div><div class="line">			D[j] = d;</div><div class="line">		&#125;</div><div class="line">		solve(i+<span class="number">1</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/Kickstart-Google/">Kickstart Google</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/07/17/动态规划总结(八）/" title="动态规划总结（八）：DAG上的动态规划" itemprop="url">动态规划总结（八）：DAG上的动态规划</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="洛绍川" target="_blank" itemprop="author">洛绍川</a>
		
  <p class="article-time">
    <time datetime="2017-07-17T13:18:30.000Z" itemprop="datePublished"> 发表于 2017-07-17</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="图上的动态规划"><a href="#图上的动态规划" class="headerlink" title="图上的动态规划"></a>图上的动态规划</h2><h3 id="1-矩形嵌套"><a href="#1-矩形嵌套" class="headerlink" title="1.矩形嵌套"></a>1.矩形嵌套</h3><blockquote>
<p>有n个矩形，每个矩形可以用两个整数a,b描述，表示他的长和宽。矩形X(a,b)可以嵌套在矩形Y(c,d)中，当且仅当a&lt;c,b&lt;d或者b&lt;c,a&lt;d。你的任务是选出尽可能多的矩形排成一行，使得除最后一个外，前一个都能嵌套在下一个矩形内。</p>
</blockquote>
<h4 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h4><p>这题有点类似最长公共子序列问题，可以用类似的动态规划方法解决。不过，矩形的“可嵌套”是一个典型的二元关系，<a href="http://blog.csdn.net/songzitea/article/details/45980289" target="_blank" rel="external">二元关系的图表示</a>。二元关系可以用图建模。将可嵌套的矩形用一条边连起来，问题等价于在图上寻找最长路径。<br>首先我们利用邻接矩阵G(i,j)来建图,如果矩形i可以嵌套在矩形j中，则G(i,j)=1。令d[i]表示从i开始的最长路径，则<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">d[i]=max\left \&#123; d[j]+1|if(G(i,j)==1) \right \&#125;</div></pre></td></tr></table></figure></p>
<h4 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h4><p>d[1…N]=0</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dp</span><span class="params">(<span class="keyword">int</span> i)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> &amp;ans = d[i];</div><div class="line">    <span class="keyword">if</span>(ans&gt;<span class="number">0</span>)<span class="keyword">return</span> ans;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;++j)</div><div class="line">    <span class="keyword">if</span>(G[i][j])ans=max(ans,dp(j)+<span class="number">1</span>);</div><div class="line">    <span class="keyword">return</span> ans;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="2-Card-Game"><a href="#2-Card-Game" class="headerlink" title="2.Card Game"></a>2.Card Game</h3><p><a href="https://codejam.withgoogle.com/codejam/contest/4214486/dashboard#s=p2" target="_blank" rel="external">题目</a></p>
<h4 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h4><p>给定一串数字A1…An,给你一个数字K,如果相邻的三个数A[k],A[k+1],A[k+2]之间的差为K,则这三个数字可以删去。重复以上操作，求能剩下的最少的数字的个数。</p>
<h4 id="分析-1"><a href="#分析-1" class="headerlink" title="分析"></a>分析</h4><p>如果用动态规划来做，则令dp[i][j]表示i到j至今能剩下的最少的数量。显然少于三张牌没办法删除，所以dp[i][j]=j-i+1 if j-i&lt;2。如果多余三张牌，则分下面两种情况讨论：</p>
<ul>
<li><p><strong>A[i]最后没被删去</strong><br>dp[i][j]=dp[i+1][j]+1</p>
</li>
<li><p><strong>A[i]最后被删去</strong><br>A[i]到A[j]之间必然存在A[p]=A[i]+K,A[q]=A[i]+2K,i&lt;p&lt;q&lt;=j且best[i+1][p-1]=0,<br>best[p+1][q-1]=0,所以dp[i][j]=dp[q+1][j]</p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span> (j - i &lt; <span class="number">2</span>)</div><div class="line">		<span class="keyword">return</span> j - i + <span class="number">1</span>;</div><div class="line">	<span class="keyword">if</span> (dp[i][j]&gt;=<span class="number">0</span>)</div><div class="line">		<span class="keyword">return</span> dp[i][j];</div><div class="line">	dp[i][j] = solve(i + <span class="number">1</span>, j)+<span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> p = i + <span class="number">1</span>; p &lt; j; ++p)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> q = p + <span class="number">1</span>; q &lt;= j; ++q)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">if</span> (A[p] == A[i] + K &amp;&amp; A[q] == A[i] + <span class="number">2</span> * K)</div><div class="line">			&#123;</div><div class="line">				<span class="keyword">if</span> (solve(i + <span class="number">1</span>, p - <span class="number">1</span>) == <span class="number">0</span> &amp;&amp; solve(p + <span class="number">1</span>, q - <span class="number">1</span>) == <span class="number">0</span>)</div><div class="line">				&#123;</div><div class="line">					dp[i][j] = min(dp[i][j],solve(q+<span class="number">1</span>,j));</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> dp[i][j];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="图论建模"><a href="#图论建模" class="headerlink" title="图论建模"></a>图论建模</h4><p>初始是一条链，如果相邻三个节点满足差为K的话，它们前面和后面的节点便可以连起来。不断减图，直至没有节点可以相连。原问题等价于在图中寻找最短路径。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/算法-动态规划/">算法 动态规划</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/07/16/动态规划总结(七）/" title="动态规划总结（七）：概率型DP" itemprop="url">动态规划总结（七）：概率型DP</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="洛绍川" target="_blank" itemprop="author">洛绍川</a>
		
  <p class="article-time">
    <time datetime="2017-07-16T14:03:11.000Z" itemprop="datePublished"> 发表于 2017-07-16</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="概率型DP"><a href="#概率型DP" class="headerlink" title="概率型DP"></a>概率型DP</h2><h3 id="1-Not-So-Random"><a href="#1-Not-So-Random" class="headerlink" title="1.Not So Random"></a>1.Not So Random</h3><p><a href="https://codejam.withgoogle.com/codejam/contest/5254486/dashboard#s=p2" target="_blank" rel="external">https://codejam.withgoogle.com/codejam/contest/5254486/dashboard#s=p2</a></p>
<h4 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h4><blockquote>
<p>有N个连续的随机发生器，其机制是对于输入X,与一个固定的数K,按一定概率A/100选择操作按位与<code>&amp;</code>,B/100选择按位或<code>|</code>，C/100概率选择按位异或<code>^</code>,前一个发生器的输出作为后一个发生器的输入，求第N个发生器输出的期望。</p>
</blockquote>
<h4 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h4><p>由于按位操作每一位均独立，所以可以单独考虑每一位，计算每一位经过N次操作后为0或为1的概率。则期望为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">E=\sum_&#123;j=0&#125;^&#123;31&#125;P\left \&#123; Y_&#123;j&#125;=1 \right \&#125;*(1&lt;&lt;j)</div></pre></td></tr></table></figure></p>
<p>P{Yj=1}表示输出结果第j位为1的概率。<br>每一位根据该位比x特和K对应位比特k执行按位操作可能发生的状态转移如下:<br><strong>k=0</strong>:</p>
<table>
<thead>
<tr>
<th>x</th>
<th>&amp;</th>
<th>\</th>
<th></th>
<th>^</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<p><strong>k=1</strong>:</p>
<table>
<thead>
<tr>
<th>x</th>
<th>&amp;</th>
<th>\</th>
<th></th>
<th>^</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
</tbody>
</table>
<h4 id="状态转移方程"><a href="#状态转移方程" class="headerlink" title="状态转移方程"></a>状态转移方程</h4><p>令dp[i][j][s]表示第i个发生器的输出结果的第j位为s的概率，则：<br><strong>k=0</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dp[i+1][j][0]=P\left \&#123; A\right \&#125;+dp[i][j][0]\ast P\left \&#123; B\right \&#125;+dp[i][j][0]\ast P\left \&#123; C\right \&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dp[i+1][j][1]=dp[i][j][1]\ast P\left \&#123; B\right \&#125;+dp[i][j][1]\ast P\left \&#123; C\right \&#125;</div></pre></td></tr></table></figure>
<p><strong>k=1</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dp[i+1][j][0]=dp[i][j][0]\ast P\left \&#123; A\right \&#125;+dp[i][j][1]\ast P\left \&#123; C\right \&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dp[i+1][j][1]=P\left \&#123; B\right \&#125;+dp[i][j][1]\ast P\left \&#123; A\right \&#125;+dp[i][j][0]\ast P\left \&#123; C\right \&#125;</div></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e5</span> + <span class="number">1</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> N, X, K, A, B, C;</div><div class="line"></div><div class="line"><span class="keyword">double</span> dp[MAXN][<span class="number">32</span>][<span class="number">2</span>];</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">solve</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">double</span> Pa = (<span class="keyword">double</span>)A / <span class="number">100</span>, Pb = (<span class="keyword">double</span>)B / <span class="number">100</span>, Pc = (<span class="keyword">double</span>)C / <span class="number">100</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">32</span>; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span> (X&amp;(<span class="number">1</span> &lt;&lt; i))</div><div class="line">			dp[<span class="number">0</span>][i][<span class="number">1</span>] = <span class="number">1</span>, dp[<span class="number">0</span>][i][<span class="number">0</span>] = <span class="number">0</span>;</div><div class="line">		<span class="keyword">else</span></div><div class="line">			dp[<span class="number">0</span>][i][<span class="number">0</span>] = <span class="number">1</span>, dp[<span class="number">0</span>][i][<span class="number">1</span>] = <span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">32</span>; ++j)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">if</span> (K&amp;(<span class="number">1</span> &lt;&lt; j))</div><div class="line">			&#123;</div><div class="line">				dp[i + <span class="number">1</span>][j][<span class="number">0</span>] = dp[i][j][<span class="number">0</span>] * Pa + dp[i][j][<span class="number">1</span>] * Pc;</div><div class="line">				dp[i + <span class="number">1</span>][j][<span class="number">1</span>] = Pb+dp[i][j][<span class="number">1</span>]*Pa+dp[i][j][<span class="number">0</span>]*Pc;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">else</span></div><div class="line">			&#123;</div><div class="line">				dp[i + <span class="number">1</span>][j][<span class="number">0</span>] = Pa + dp[i][j][<span class="number">0</span>] * Pb + dp[i][j][<span class="number">0</span>] * Pc;</div><div class="line">				dp[i + <span class="number">1</span>][j][<span class="number">1</span>] = dp[i][j][<span class="number">1</span>] * Pb + dp[i][j][<span class="number">1</span>] * Pc;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">double</span> ans = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">31</span>; ++i)</div><div class="line">		ans += (dp[N][i][<span class="number">1</span>]*(<span class="number">1</span>&lt;&lt;i));</div><div class="line">	<span class="keyword">return</span> ans;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h4><p>由于各位相互独立，上面两个循环可以交换次序，即对给定位j,一次性算完通N个发生器最后的概率，由于给定位j,K在该位上的状态转移矩阵是定的：<br><strong>k=0</strong>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">\left [ \begin&#123;matrix&#125;</div><div class="line">dp[i+1][j][0]\\dp[i+1][j][1]</div><div class="line">\end&#123;matrix&#125; \right ]</div><div class="line">=</div><div class="line">\left [ \begin&#123;matrix&#125;</div><div class="line"> 1 &amp; P\left \&#123; A \right \&#125;\\ </div><div class="line"> 0 &amp; P\left \&#123; B \right \&#125;+P\left \&#123; C \right \&#125;</div><div class="line">\end&#123;matrix&#125; \right ]</div><div class="line">\left [ \begin&#123;matrix&#125;</div><div class="line">dp[i][j][0]\\dp[i][j][1] </div><div class="line">\end&#123;matrix&#125; \right ]</div></pre></td></tr></table></figure></p>
<p><strong>k=1</strong>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">\left [ \begin&#123;matrix&#125;</div><div class="line">dp[i+1][j][0]\\dp[i+1][j][1]</div><div class="line">\end&#123;matrix&#125; \right ]</div><div class="line">=</div><div class="line">\left [ \begin&#123;matrix&#125;</div><div class="line"> P\left \&#123; A \right \&#125;&amp; P\left \&#123; C \right \&#125;\\ </div><div class="line"> P\left \&#123; B \right \&#125;+P\left \&#123; C \right \&#125;&amp; P\left \&#123; B \right \&#125;+P\left \&#123; A \right \&#125;</div><div class="line">\end&#123;matrix&#125; \right ]</div><div class="line">\left [ \begin&#123;matrix&#125;</div><div class="line">dp[i][j][0]\\dp[i][j][1] </div><div class="line">\end&#123;matrix&#125; \right ]</div></pre></td></tr></table></figure></p>
<p>类似于马尔科夫链，P~n~=M^n^P~0~,只需要要计算转移矩阵的n次幂即可，而矩阵求幂可以利用快速求幂算法：<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line">#include&lt;iostream&gt;</div><div class="line"></div><div class="line">using namespace std;</div><div class="line"></div><div class="line">int N, X, K, A, B, C;</div><div class="line"></div><div class="line">struct mat</div><div class="line">&#123;</div><div class="line">	int row=2, col=2;</div><div class="line">	double m[2][2];</div><div class="line">	mat()</div><div class="line">	&#123;</div><div class="line">		m[0][0] = 0;</div><div class="line">		m[0][1] = 0;</div><div class="line">		m[1][0] = 0;</div><div class="line">		m[1][1] = 0;</div><div class="line">	&#125;;</div><div class="line">	mat(double a,double b,double c,double d)</div><div class="line">	&#123;</div><div class="line">		m[0][0] = a;</div><div class="line">		m[0][1] = b;</div><div class="line">		m[1][0] = c;</div><div class="line">		m[1][1] = d;</div><div class="line">	&#125;;</div><div class="line">	mat operator*(mat &amp;mtx)const</div><div class="line">	&#123;</div><div class="line">		mat ans;</div><div class="line">		for (int i = 0; i &lt; row; ++i)</div><div class="line">		&#123;</div><div class="line">			for (int j = 0; j &lt; mtx.col; ++j)</div><div class="line">			&#123;</div><div class="line">				for (int k = 0; k &lt; col; ++k)</div><div class="line">					ans.m[i][j] += m[i][k] * mtx.m[k][j];</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		ans.col = col;</div><div class="line">		ans.row = mtx.col;</div><div class="line">		return ans;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">/*y=x^n*/</div><div class="line">mat mat_pow(mat x,int n)</div><div class="line">&#123;</div><div class="line">	mat y(1.0, 0, 0, 1.0),base=x;</div><div class="line">	while (n)</div><div class="line">	&#123;</div><div class="line">		if (n &amp; 1) y = y*base; </div><div class="line">		n &gt;&gt;= 1;</div><div class="line">		base = base*base;</div><div class="line">	&#125;</div><div class="line">	return y;</div><div class="line">&#125;</div><div class="line"></div><div class="line">double solve()</div><div class="line">&#123;</div><div class="line">	double Pa = (double)A / 100;</div><div class="line">	double Pb = (double)B / 100;</div><div class="line">	double Pc = (double)C / 100;</div><div class="line">	mat K0(1,Pa,0,Pb+Pc);//k=0转移矩阵</div><div class="line">	mat K1(Pa,Pc,Pb+Pc,Pb+Pa);//k=1转移矩阵</div><div class="line">	double ans = 0;</div><div class="line">	for (int j = 0; j &lt; 32; ++j)</div><div class="line">	&#123;</div><div class="line">		if (K&amp;(1 &lt;&lt; j))</div><div class="line">		&#123;</div><div class="line">			mat m = mat_pow(K1, N);</div><div class="line">			if (X&amp;(1 &lt;&lt; j))ans+=(m.m[1][1]*(1&lt;&lt;j));</div><div class="line">			else ans+=(m.m[1][0]*(1&lt;&lt;j));</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			mat m = mat_pow(K0, N);</div><div class="line">			if (X&amp;(1 &lt;&lt; j))ans += (m.m[1][1] * (1 &lt;&lt; j));</div><div class="line">			else ans += (m.m[1][0] * (1 &lt;&lt; j));</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	return ans;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/算法-动态规划/">算法 动态规划</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/07/15/动态规划总结(六）/" title="动态规划总结（六）：状压DP" itemprop="url">动态规划总结（六）：状压DP</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="洛绍川" target="_blank" itemprop="author">洛绍川</a>
		
  <p class="article-time">
    <time datetime="2017-07-15T11:56:43.000Z" itemprop="datePublished"> 发表于 2017-07-15</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="状态压缩动态规划"><a href="#状态压缩动态规划" class="headerlink" title="状态压缩动态规划"></a>状态压缩动态规划</h2><p>有些问题的状态比较难表示，但是数据范围比较小，这时候我们可以利用二进制每一位表示一个状态，整个二进制数表示整个集合。</p>
<h3 id="二进制基础"><a href="#二进制基础" class="headerlink" title="二进制基础"></a>二进制基础</h3><p>1.判断x第i位是不是为1<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">test</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> i)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> (x&gt;&gt;i)&amp;<span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2.将x第i位置1<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">(<span class="keyword">int</span> &amp;x,<span class="keyword">int</span> i)</span></span></div><div class="line">&#123;</div><div class="line">    x|=(<span class="number">1</span>&lt;&lt;i);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>3.将x第i位置0<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">reset</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> i)</span></span></div><div class="line">&#123;</div><div class="line">    x^=(<span class="number">1</span>&lt;&lt;i);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>4.将x最右边的1置0<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">x&amp;=(x<span class="number">-1</span>)</div></pre></td></tr></table></figure></p>
<h3 id="1-骨牌覆盖问题"><a href="#1-骨牌覆盖问题" class="headerlink" title="1.骨牌覆盖问题"></a>1.骨牌覆盖问题</h3><blockquote>
<p>给你n*m（1&lt;=n,m&lt;=11）的方格矩阵，要求用1X2的多米诺骨牌去填充，问有多少种填充方法。<br>示例：<br>2X2的矩阵共有两种填充方法。</p>
</blockquote>
<h4 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h4><p>如果用一个数字j的二进制各位x来表示该位置铺瓷砖的方法，如果x位置横着放瓷砖，则x位和x+1位都置1;如果x为竖着放，则x位置0，下一行的x位置1。令dp[i][j]表示第i行达到状态j的填充方案数。则dp[i][j]等于所有与其兼容的dp[i-1][k]之和，所谓兼容，指的是如果第i-1状态k的x位置出现0，则i行x位置必须为1。例如第i行为11，则第i-1行可以为00或11，它们都是可以被第i行的11兼容。<br>对于位置[p,q],我们可以选择横着放瓷砖，也可以选择竖着放瓷砖，我们可以递归的产生所有合法状态。</p>
<p>当前位不放，则前行的当前位必定为1才能兼容且后行为0：c=c+1，(pre&lt;&lt;1)|1,now&lt;&lt;1</p>
<p>当前位上方，则前行的当前位必定为0才能兼容且后行为1：c=c+1，(pre&lt;&lt;1),(now&lt;&lt;1)|1</p>
<p>当前位右方，则前行的当前2位必定为1才能兼容且后行当前2位为1：c=c+2，(pre&lt;&lt;1)|3,(now&lt;&lt;1)|3</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 11</span></div><div class="line"></div><div class="line"><span class="keyword">int</span> N, M,W=<span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> state[(<span class="number">1</span> &lt;&lt; <span class="number">22</span>) + <span class="number">1</span>][<span class="number">2</span>];<span class="comment">//一共可能有1&lt;&lt;11*1&lt;&lt;11种兼容对</span></div><div class="line"><span class="keyword">int</span> dp[MAXN + <span class="number">1</span>][<span class="number">1</span> &lt;&lt; MAXN];</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">通过DFS枚举所有兼容对</div><div class="line">1.如果当前行j位选择下放为0，则上一行j位必为1</div><div class="line">2.若果当前行j位选择上方为1，则上一行j位必为0</div><div class="line">3.如果当前行j位选择右放，则当前行和上一行j，j+1均为1</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> j,<span class="keyword">int</span> pre,<span class="keyword">int</span> now)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span> (j &gt; M)</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	<span class="keyword">if</span> (j == M)</div><div class="line">	&#123;</div><div class="line">		state[W][<span class="number">0</span>] = pre;</div><div class="line">		state[W++][<span class="number">1</span>] = now;</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line">	dfs(j + <span class="number">1</span>, (pre &lt;&lt; <span class="number">1</span>) | <span class="number">1</span>, now &lt;&lt; <span class="number">1</span>);<span class="comment">//当前行下放</span></div><div class="line">	dfs(j + <span class="number">1</span>, pre &lt;&lt; <span class="number">1</span>, (now &lt;&lt; <span class="number">1</span>) | <span class="number">1</span>);<span class="comment">//当前行上放</span></div><div class="line">	dfs(j + <span class="number">2</span>, (pre &lt;&lt; <span class="number">2</span>) | <span class="number">3</span>, (now &lt;&lt; <span class="number">2</span>) | <span class="number">3</span>);<span class="comment">//当前行横放</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	dfs(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">	dp[<span class="number">0</span>][(<span class="number">1</span> &lt;&lt; M) - <span class="number">1</span>] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; W; ++j)</div><div class="line">		&#123;</div><div class="line">			dp[i + <span class="number">1</span>][state[j][<span class="number">1</span>]] += dp[i][state[j][<span class="number">0</span>]];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> dp[N][(<span class="number">1</span> &lt;&lt; M) - <span class="number">1</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="built_in">cin</span> &gt;&gt; N &gt;&gt; M;</div><div class="line">	<span class="keyword">if</span> (N &lt; M)swap(N, M);</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; solve() &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="2-旅行商问题"><a href="#2-旅行商问题" class="headerlink" title="2.旅行商问题"></a>2.旅行商问题</h3><blockquote>
<p>给定一个n个顶点组成的带权有向图的距离矩阵d(i,j)(INF表示没有边)。要求从顶点0出发，经过每个顶点恰好一次再回到顶点0。问经过的边的总权重的最小值是多少？</p>
</blockquote>
<h3 id="分析-1"><a href="#分析-1" class="headerlink" title="分析"></a>分析</h3><p>令S表示还未经过的点集，v表示当前所在点，则初始状态为dp[V][0]=0(V为全集)，终止状态为dp[0][0],状态转移公式如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dp[S][v]=min(dp[S|(1&lt;&lt;u)][u]+d(u,v))</div></pre></td></tr></table></figure></p>
<h3 id="记忆化搜索"><a href="#记忆化搜索" class="headerlink" title="记忆化搜索"></a>记忆化搜索</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> n;</div><div class="line"><span class="keyword">int</span> d[maxn][maxn];</div><div class="line"><span class="keyword">int</span> dp[<span class="number">1</span>&lt;&lt;maxn][maxn];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">rec</span><span class="params">(<span class="keyword">int</span> S,<span class="keyword">int</span> v)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span>(dp[S][v]&gt;=<span class="number">0</span>)<span class="keyword">return</span> dp[S][v];</div><div class="line">    <span class="keyword">if</span>(S==(<span class="number">1</span>&lt;&lt;n)<span class="number">-1</span> &amp;&amp; v==<span class="number">0</span>) <span class="keyword">return</span> dp[S][v]=<span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> res = INF;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> u=<span class="number">0</span>;u&lt;n;++u)</div><div class="line">    &#123;</div><div class="line">    <span class="keyword">if</span>(!(S&gt;&gt;u&amp;<span class="number">1</span>))</div><div class="line">        res = min(res,rec(S|(<span class="number">1</span>&lt;&lt;u),u)+d[u][v]);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> dp[S][v]=res;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">memset</span>(dp,<span class="number">-1</span>,<span class="keyword">sizeof</span>(dp));</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,rec(<span class="number">0</span>,<span class="number">0</span>));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> n;</div><div class="line"><span class="keyword">int</span> d[maxn][maxn];</div><div class="line"><span class="keyword">int</span> dp[maxn][maxn];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">memset</span>(dp,<span class="number">0x3f</span>,<span class="keyword">sizeof</span>(dp));</div><div class="line">    dp[(<span class="number">1</span>&lt;&lt;n)<span class="number">-1</span>][<span class="number">0</span>]=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> S=(<span class="number">1</span>&lt;&lt;n)<span class="number">-2</span>;S&gt;=<span class="number">0</span>;--S)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> v=<span class="number">0</span>;v&lt;n;++v)</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> u=<span class="number">0</span>;u&lt;n;++u)</div><div class="line">            &#123;</div><div class="line">                <span class="keyword">if</span>(!((S&gt;&gt;u)&amp;<span class="number">1</span>))</div><div class="line">                dp[S][v]=min(dp[S][v],dp[S|(<span class="number">1</span>&lt;&lt;u)][u]+d[u][v]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[<span class="number">0</span>][<span class="number">0</span>]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/算法-动态规划/">算法 动态规划</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/07/14/动态规划总结(五）/" title="动态规划总结（五）：计数DP" itemprop="url">动态规划总结（五）：计数DP</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="洛绍川" target="_blank" itemprop="author">洛绍川</a>
		
  <p class="article-time">
    <time datetime="2017-07-14T12:23:00.000Z" itemprop="datePublished"> 发表于 2017-07-14</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="计数DP"><a href="#计数DP" class="headerlink" title="计数DP"></a>计数DP</h2><h3 id="1-划分数"><a href="#1-划分数" class="headerlink" title="1.划分数"></a>1.划分数</h3><blockquote>
<p>有N个无区别的物品，将它们划为不超过M堆，求划分方案数。</p>
</blockquote>
<h4 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h4><p>dp[i][j]表示j个物品划为i+1堆,a1,a2,…,ai,则若存在ai=0,则共有dp[i-1][j]堆，若任意ai！=0，共有dp[i][j-i]堆。所以：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dp[i][j]=dp[i-1][j]+dp[i][j-1]</div></pre></td></tr></table></figure></p>
<h3 id="2-多重集合数"><a href="#2-多重集合数" class="headerlink" title="2.多重集合数"></a>2.多重集合数</h3><blockquote>
<p>有N种物品，每种物品有Ai个，从这些物品中取出M个，求方案数。</p>
</blockquote>
<h4 id="分析-1"><a href="#分析-1" class="headerlink" title="分析"></a>分析</h4><p>dp[i+1][j]表示前i种物品中取出j个的方案数。则对于第i种物品，可以取出0,1,…Ai个。所以<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dp[i+1][j]=dp[i][j]+dp[i][j-1]+...+dp[i][j-Ai]=\sum_&#123;k=0&#125;^&#123;min(j,Ai)&#125;dp[i][j-k]</div></pre></td></tr></table></figure></p>
<h4 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h4><p>这种求和的动态规划，通常可以把递推式进行变形，从而降低复杂度。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">\sum_&#123;k=0&#125;^&#123;min(j,Ai)&#125;dp[i]=\sum_&#123;k=0&#125;^&#123;min(j-1,Ai)&#125;dp[i][(j-1)-k]+dp[i][j]-dp[i][j-1-Ai]=dp[i+1][j-1]+dp[i][j]-dp[i][j-1-Ai]</div></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/算法-动态规划/">算法 动态规划</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/07/13/动态规划总结(四）/" title="动态规划总结（四）：背包问题九讲笔记" itemprop="url">动态规划总结（四）：背包问题九讲笔记</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="洛绍川" target="_blank" itemprop="author">洛绍川</a>
		
  <p class="article-time">
    <time datetime="2017-07-13T14:07:00.000Z" itemprop="datePublished"> 发表于 2017-07-13</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="01背包问题"><a href="#01背包问题" class="headerlink" title="01背包问题"></a>01背包问题</h2><blockquote>
<p>有 N 件物品和一个容量为C的背包。放入第 i 件物品耗费的费用是 Wi，得到的<br>价值是 Vi。求解将哪些物品装入背包可使价值总和最大。  </p>
</blockquote>
<h3 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h3><p>令F[i][j]表示从前i件物品里选物品放入容量为j的背包中所能获得的最大价值。则状态转移方程为：<code>F[i][j]=max{F[i-1][j-k*Wi]+k*Vi|0&lt;=k&lt;=1}</code>。<br>该状态方程的含义是：若放入第i件物品，问题转化为从前i-1件中选物品，背包容量为j-Wi所能装入的最大价值。如不放入第i件物品，问题转化为从前i-1件中选物品，背包容量为j所能装入的最大价值。</p>
<h3 id="初始化："><a href="#初始化：" class="headerlink" title="初始化："></a>初始化：</h3><p>F[0][0…N]=0 如果背包不需装满<br>F[0][0]=0,F[0][1…N]=-∞ 如果背包必须装满<br>如果背包必需装满，则初始情况下只有容量为0的背包恰好被0件物品装满这一合法解，其余解均为非合法解。如果背包不需装满，则初始情况下任何容量的背包均能装入0件物品获得最大价值0。</p>
<h3 id="最大价值："><a href="#最大价值：" class="headerlink" title="最大价值："></a>最大价值：</h3><p>F[N][C]</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">问题描述：</div><div class="line">给定N个物品，重量和价值分别为w1,v1,...,wn,vn.</div><div class="line">给定一个背包。容量为C。</div><div class="line">求该背包能装的最大价值的物品。</div><div class="line">*/</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="comment">//O(CN)空间复杂度</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> *w,<span class="keyword">int</span> *v,<span class="keyword">int</span> C,<span class="keyword">int</span> num)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> **F = (<span class="keyword">int</span>**)<span class="built_in">malloc</span>((num+<span class="number">1</span>)*<span class="keyword">sizeof</span>(<span class="keyword">int</span>*));</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num+<span class="number">1</span>; ++i)</div><div class="line">		F[i] = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>((C+<span class="number">1</span>)*<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</div><div class="line"></div><div class="line">	<span class="comment">//初始化</span></div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; C + <span class="number">1</span>; ++j)</div><div class="line">		F[<span class="number">0</span>][j] = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = w[i]<span class="number">-1</span>; j &lt; C; ++j)</div><div class="line">		&#123;</div><div class="line">			F[i + <span class="number">1</span>][j + <span class="number">1</span>] = max(F[i][j + <span class="number">1</span>], F[i][j + <span class="number">1</span> - w[i]] + v[i]);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> result = F[num][C];</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num + <span class="number">1</span>; ++i)</div><div class="line">		<span class="built_in">free</span>(F[i]);</div><div class="line">	<span class="built_in">free</span>(F);</div><div class="line">	<span class="keyword">return</span> result;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//O(C)空间复杂度</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dp</span><span class="params">(<span class="keyword">int</span> *w, <span class="keyword">int</span> *v, <span class="keyword">int</span> C, <span class="keyword">int</span> num)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> *F = <span class="keyword">new</span> <span class="keyword">int</span>[C + <span class="number">1</span>];</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; C + <span class="number">1</span>; ++i)</div><div class="line">		F[i] = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = C; j &gt;= w[i]; --j)</div><div class="line">			F[j] = max(F[j], F[j - w[i]] + v[i]);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> result = F[C];</div><div class="line">	<span class="keyword">delete</span>[]F;</div><div class="line">	<span class="keyword">return</span> result;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	freopen(<span class="string">"Knapsack.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"Knapsack.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="keyword">int</span> C, num;</div><div class="line">	<span class="built_in">cin</span> &gt;&gt; C &gt;&gt; num;</div><div class="line">	<span class="keyword">int</span> *w = <span class="keyword">new</span> <span class="keyword">int</span>[num];</div><div class="line">	<span class="keyword">int</span> *v = <span class="keyword">new</span> <span class="keyword">int</span>[num];</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> ww;</div><div class="line">		<span class="built_in">cin</span> &gt;&gt; ww;</div><div class="line">		w[i] = ww;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> vv;</div><div class="line">		<span class="built_in">cin</span> &gt;&gt; vv;</div><div class="line">		v[i] = vv;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; dp(w,v,C,num)&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">	<span class="keyword">delete</span>[]w;</div><div class="line">	<span class="keyword">delete</span>[]v;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="完全背包问题"><a href="#完全背包问题" class="headerlink" title="完全背包问题"></a>完全背包问题</h2><blockquote>
<p>有 N 种物品和一个容量为C的背包。放入第 i 件物品耗费的费用是 Wi，得到的<br>价值是 Vi。在每种物品都有无限件可以选择时，求解将哪些物品装入背包可使价值总和最大。  </p>
</blockquote>
<h3 id="分析：-1"><a href="#分析：-1" class="headerlink" title="分析："></a>分析：</h3><p>F[i][j]=max{F[i-1][j-k<em>w[i]]+k</em>v[i]|k&gt;=0}<br>=max{F[i-1][j],max{F[i-1][j-k<em>w[i]]+k</em>v[i]|k&gt;=1}}<br>=max{F[i-1][j],max{F[i-1][j-w[i]-k<em>w[i]]+k</em>v[i]|k&gt;=0}+v[i]}<br>=max{F[i-1][j],F[i][j-w[i]]+v[i]}<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="comment">//O(VN)空间复杂度</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> *w,<span class="keyword">int</span> *v,<span class="keyword">int</span> C,<span class="keyword">int</span> num)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> **F = (<span class="keyword">int</span>**)<span class="built_in">malloc</span>((num+<span class="number">1</span>)*<span class="keyword">sizeof</span>(<span class="keyword">int</span>*));</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num + <span class="number">1</span>; ++i)</div><div class="line">		F[i] = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>((C+<span class="number">1</span>)*<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; C + <span class="number">1</span>; ++j)</div><div class="line">		F[<span class="number">0</span>][j] = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; C + <span class="number">1</span>; ++j)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">if</span> (j &lt; w[i])</div><div class="line">				F[i + <span class="number">1</span>][j] = F[i][j];</div><div class="line">			<span class="keyword">else</span></div><div class="line">				F[i + <span class="number">1</span>][j] = max(F[i][j],F[i+<span class="number">1</span>][j-w[i]]+v[i]);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> result = F[num][C];</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num + <span class="number">1</span>; ++i)</div><div class="line">		<span class="built_in">free</span>(F[i]);</div><div class="line">	<span class="built_in">free</span>(F);</div><div class="line">	<span class="keyword">return</span> result;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//O(V)时间复杂度</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dp</span><span class="params">(<span class="keyword">int</span> *w, <span class="keyword">int</span> *v, <span class="keyword">int</span> C, <span class="keyword">int</span> num)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> *F = <span class="keyword">new</span> <span class="keyword">int</span>[C + <span class="number">1</span>];</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; C + <span class="number">1</span>; ++i)</div><div class="line">		F[i] = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = w[i]; j &lt; C + <span class="number">1</span>; ++j)</div><div class="line">			F[j] = max(F[j],F[j-w[i]]+v[i]);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> result = F[C];</div><div class="line">	<span class="keyword">delete</span>[] F;</div><div class="line">	<span class="keyword">return</span> result;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	freopen(<span class="string">"Knapsack.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"Knapsack.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line"></div><div class="line">	<span class="keyword">int</span> C, num;</div><div class="line">	<span class="built_in">cin</span> &gt;&gt; C &gt;&gt; num;</div><div class="line">	<span class="keyword">int</span> *w = <span class="keyword">new</span> <span class="keyword">int</span>[num];</div><div class="line">	<span class="keyword">int</span> *v = <span class="keyword">new</span> <span class="keyword">int</span>[num];</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> ww;</div><div class="line">		<span class="built_in">cin</span> &gt;&gt; ww;</div><div class="line">		w[i] = ww;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> vv;</div><div class="line">		<span class="built_in">cin</span> &gt;&gt; vv;</div><div class="line">		v[i] = vv;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; dp(w,v,C,num)&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">	<span class="keyword">delete</span>[]w;</div><div class="line">	<span class="keyword">delete</span>[]v;</div><div class="line"></div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="多重背包问题"><a href="#多重背包问题" class="headerlink" title="多重背包问题"></a>多重背包问题</h2><p>完全背包问题</p>
<blockquote>
<p>有 N 种物品和一个容量为C的背包。放入第 i 件物品耗费的费用是 Wi，得到的<br>价值是 Vi。在每种物品有Mi件可以选择时，求解将哪些物品装入背包可使价值总和最大。  </p>
</blockquote>
<h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>多重背包主要利用了二进制分解思想。对于任意物品件数Mi，可以分解为2^0^,2^1^,…,2^k-1^,Mi-2^k^+1堆物品，且 k 是满足 Mi − 2k + 1 &gt; 0 的最大整数。这些堆可以组合成任意小于等于Mi的整数。这样我们就可以把这个问题转换成01背包问题，对应着每堆物品选还是不选。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; V;</div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; W;</div><div class="line"></div><div class="line"><span class="keyword">int</span> w[<span class="number">10</span>];</div><div class="line"><span class="keyword">int</span> v[<span class="number">10</span>];</div><div class="line"><span class="keyword">int</span> m[<span class="number">10</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">devide</span><span class="params">(<span class="keyword">int</span> num)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> k = <span class="number">1</span>;</div><div class="line">		<span class="keyword">while</span> (m[i]-k&gt;=<span class="number">0</span>)</div><div class="line">		&#123;</div><div class="line">			V.push_back(k*v[i]);</div><div class="line">			W.push_back(k*w[i]);</div><div class="line">			m[i] -= k;</div><div class="line">			k *= <span class="number">2</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> (m[i])</div><div class="line">			V.push_back(m[i]*v[i]),W.push_back(m[i]*w[i]);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> w[],<span class="keyword">int</span> v[],<span class="keyword">int</span> m[],<span class="keyword">int</span> C,<span class="keyword">int</span> num)</span></span></div><div class="line">&#123;</div><div class="line">	devide(num);</div><div class="line">	<span class="keyword">int</span> R = V.size();</div><div class="line">	<span class="keyword">int</span> **dp = (<span class="keyword">int</span>**)<span class="built_in">malloc</span>((R+<span class="number">1</span>)*<span class="keyword">sizeof</span>(<span class="keyword">int</span>*));</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; R + <span class="number">1</span>; ++i)</div><div class="line">	&#123;</div><div class="line">		dp[i] = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>((C + <span class="number">1</span>)*<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; C + <span class="number">1</span>; ++j)</div><div class="line">		&#123;</div><div class="line">			dp[i][j] = <span class="number">0</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; R + <span class="number">1</span>; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; C + <span class="number">1</span>; ++j)</div><div class="line">		&#123;</div><div class="line">			dp[i][j] = max(dp[i - <span class="number">1</span>][j], dp[i - <span class="number">1</span>][j - W[i<span class="number">-1</span>]] + V[i<span class="number">-1</span>]);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> dp[R][C];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="多重部分和问题"><a href="#多重部分和问题" class="headerlink" title="多重部分和问题"></a>多重部分和问题</h2><blockquote>
<p>有n种不同的数字ai,每种数字有Mi个，判断是否可以从这些数字中选出若各个使它们的和恰好为K.</p>
</blockquote>
<h3 id="分析-1"><a href="#分析-1" class="headerlink" title="分析"></a>分析</h3><p>如果dp[i+1][j]表示前i种数字可否凑成数字j。如果使用第i种数字可以得到j,前i-1种数字必须凑出j-k<em>ai,0&lt;=k&lt;=Mi.所以dp[i+1][j]=max{0,dp[i][j-k</em>ai]|0&lt;=k&lt;=Mi}.算法复杂度为<code>O(NK∑Mi)</code><br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> **dp = (<span class="keyword">int</span>**)<span class="built_in">malloc</span>((N + <span class="number">1</span>)*<span class="keyword">sizeof</span>(<span class="keyword">int</span>*));</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N + <span class="number">1</span>; ++i)</div><div class="line">	&#123;</div><div class="line">		dp[i] = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>((K+<span class="number">1</span>)*<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; K + <span class="number">1</span>; ++j)</div><div class="line">			dp[i][j] = <span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line">	dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = A[i]; j &lt;= K; ++j)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; j - k*A[i] &gt;= <span class="number">0</span> &amp;&amp; k&lt;=M[i]; ++k)</div><div class="line">				dp[i + <span class="number">1</span>][j] = max(<span class="number">0</span>,dp[i][j-k*A[i]]);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h3><p>dp[i+1][j]表示能否的话提供的信息太少了，如果另dp[i+1][j]表示前i种数字凑出j第i种最多还剩的数量，初始化为-1，dp[0][0]=0.给定i,对于数字j,只需要关心能否凑出j-ai,若凑不出j-ai，则必定凑不出j.若能凑出j-ai且第i种数字还有的话，则必定能凑出j.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">dp[i+1][j]=</div><div class="line">\left\&#123;\begin&#123;matrix&#125;</div><div class="line">Mi,dp[i][j]&gt;=0\\</div><div class="line">-1,j&lt;Ai || dp[i+1][j-Ai]&lt;=0\\ </div><div class="line">dp[i+1][j-Ai]-1</div><div class="line">\end&#123;matrix&#125;\right.</div></pre></td></tr></table></figure></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span>** dp = (<span class="keyword">int</span>**)<span class="built_in">malloc</span>((N+<span class="number">1</span>)*<span class="keyword">sizeof</span>(<span class="keyword">int</span>*));</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N + <span class="number">1</span>; ++i)</div><div class="line">	&#123;</div><div class="line">		dp[i] = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>((K+<span class="number">1</span>)*<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; N + <span class="number">1</span>; ++j)</div><div class="line">		&#123;</div><div class="line">			dp[i][j] = <span class="number">-1</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = A[i]; j &lt;= K; ++j)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">if</span> (dp[i][j] &gt;= <span class="number">0</span>)</div><div class="line">				dp[i + <span class="number">1</span>][j] = M[i];</div><div class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (dp[i + <span class="number">1</span>][j - A[i]] &gt; <span class="number">0</span>)</div><div class="line">			&#123;</div><div class="line">				dp[i + <span class="number">1</span>][j] = dp[i + <span class="number">1</span>][j - A[i]]<span class="number">-1</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> dp[N][K] &gt;= <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/算法-动态规划/">算法 动态规划</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/07/12/动态规划总结(三)/" title="动态规划总结（三）：划分（区间）动态规划" itemprop="url">动态规划总结（三）：划分（区间）动态规划</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="洛绍川" target="_blank" itemprop="author">洛绍川</a>
		
  <p class="article-time">
    <time datetime="2017-07-12T13:07:57.000Z" itemprop="datePublished"> 发表于 2017-07-12</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="划分-区间-动态规划"><a href="#划分-区间-动态规划" class="headerlink" title="划分(区间)动态规划"></a>划分(区间)动态规划</h2><p>这类动态规划通常有如下形式：<br>f(i,j)={f(i,k)+f(k+1,j)+cost(k)} i&lt;k&lt;j </p>
<h2 id="经典例题"><a href="#经典例题" class="headerlink" title="经典例题"></a>经典例题</h2><blockquote>
<p>矩阵连乘、凸多边形三角剖分、石子合并<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">有N堆石子排成一排，每堆石子有一定的数量。现要将N堆石子并成为一堆。合并的过程只能每次将相邻的两堆石子堆成一堆</div><div class="line">，每次合并花费的代价为这两堆石子的和，经过N-1次合并后成为一堆。求出总的代价最小值。</div><div class="line"></div><div class="line">分析：</div><div class="line">令f(i,j)表示从合并第i到j堆石子所需要的最小代价,sum(i,j)为第i到j堆石子总数量。</div><div class="line"></div><div class="line">则：</div><div class="line">f(i,j)=i堆石子数量，i==j</div><div class="line">f（i,j)=min&#123;f(i,k)+f(k+1,j)&#125;+sum(i,j)i&lt;k&lt;j</div><div class="line">*/</div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0x3f3f3f3f</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span>* a, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> s = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> k = i; k &lt;= j; ++k)</div><div class="line">		s += a[k];</div><div class="line">	<span class="keyword">return</span> s;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> *a,<span class="keyword">int</span> len)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> **c = (<span class="keyword">int</span>**)<span class="built_in">malloc</span>(len*<span class="keyword">sizeof</span>(<span class="keyword">int</span>*));</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; ++i)</div><div class="line">	&#123;</div><div class="line">		c[i] = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(len*<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; len; ++j)</div><div class="line">			c[i][j] = INF;</div><div class="line">		c[i][i] = <span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; len; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j+i&lt;len; ++j)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> k = j; k &lt; j + i;++k)</div><div class="line">			c[j][j + i] = min(c[j][j+i],c[j][k]+c[k+<span class="number">1</span>][j+i]+sum(a,j,j+i));</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> cost = c[<span class="number">0</span>][len - <span class="number">1</span>];</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; ++i)</div><div class="line">		<span class="built_in">free</span>(c[i]);</div><div class="line">	<span class="built_in">free</span>(c);</div><div class="line">	<span class="keyword">return</span> cost;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	freopen(<span class="string">"Stone.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"Stone.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="keyword">int</span> t;</div><div class="line">	<span class="built_in">cin</span> &gt;&gt; t;</div><div class="line">	<span class="keyword">int</span> *a = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(t*<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; t; ++i)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> n;</div><div class="line">		<span class="built_in">cin</span> &gt;&gt; n;</div><div class="line">		a[i] = n;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; solve(a, t) &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">	<span class="built_in">free</span>(a);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/算法-动态规划/">算法 动态规划</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/6/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/8/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  


  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/PAT/" title="PAT">PAT<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Parallel-Studio/" title="Parallel Studio">Parallel Studio<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Python/" title="Python">Python<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/hihocoder/" title="hihocoder">hihocoder<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/生活随笔/" title="生活随笔">生活随笔<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/算法/" title="算法">算法<sup>3</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/算法/" title="算法">算法<sup>31</sup></a></li>
			
		
			
				<li><a href="/tags/算法-leetcode/" title="算法 leetcode">算法 leetcode<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/算法-动态规划/" title="算法 动态规划">算法 动态规划<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/Python/" title="Python">Python<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Kickstart-Google/" title="Kickstart Google">Kickstart Google<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/笔试/" title="笔试">笔试<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/强化学习/" title="强化学习">强化学习<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/MNIST-TensorFlow/" title="MNIST TensorFlow">MNIST TensorFlow<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/深度学习-TensorFlow/" title="深度学习 TensorFlow">深度学习 TensorFlow<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Manacher算法/" title="Manacher算法">Manacher算法<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/正则表达式/" title="正则表达式">正则表达式<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Trie树/" title="Trie树">Trie树<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Parallel-Studio/" title="Parallel Studio">Parallel Studio<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/ICC/" title="ICC">ICC<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/MKL/" title="MKL">MKL<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/KMP算法/" title="KMP算法">KMP算法<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/母函数法/" title="母函数法">母函数法<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/hihocoder-分治/" title="hihocoder 分治">hihocoder 分治<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/DFA/" title="DFA">DFA<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/matplotlib/" title="matplotlib">matplotlib<sup>1</sup></a></li>
			
		
		</ul>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2018 
		
		<a href="/about" target="_blank" title="洛绍川">洛绍川</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End --><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->

  </body>
 </html>
